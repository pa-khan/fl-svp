<template>
  <div ref="episode" class="episode"
    :class="[item.type == 3 ? classLock : null, item.type == 4 || item.type == 5 ? classViewed : null]">
    <div class="episode__wrap">
      <div class="episode__inner">
        <div class="episode__review" v-if="item.type != 3 && like">
          <div class="episode__stars">
            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M7.57664 0.99748C7.31977 0.554714 6.68031 0.554714 6.42344 0.99748L4.61405 4.11569C4.48713 4.33441 4.26777 4.48367 4.01773 4.52143L0.626847 5.03359C0.0573268 5.11961 -0.142447 5.83867 0.301093 6.20613L2.82715 8.29893C3.06098 8.49267 3.17093 8.79827 3.11413 9.09653L2.45335 12.5667C2.34889 13.1152 2.92475 13.5414 3.41885 13.2813L6.61177 11.6C6.85477 11.4721 7.14524 11.4721 7.38831 11.6L10.5812 13.2813C11.0753 13.5414 11.6512 13.1152 11.5467 12.5667L10.886 9.09653C10.8292 8.79827 10.9391 8.49267 11.1729 8.29893L13.699 6.20613C14.1425 5.83867 13.9428 5.11961 13.3732 5.03359L9.98237 4.52143C9.73231 4.48367 9.51297 4.33441 9.38604 4.11569L7.57664 0.99748Z"
                fill="#282D49" />
            </svg>
            <span>{{ like }}</span>
          </div>
          <div class="episode__ratings">{{ item.rating.total }} оценок</div>
        </div>
        <div class="episode__share share" :class="isShareShow ? classShareShow : null"
          v-if="item.type == 4 || item.type == 5">
          <div class="share__inner">
            <div class="share__btn" @click="isShareShow = !isShareShow">
              <svg width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M1 8.33337V12.3334C1 13.0698 1.59695 13.6667 2.33333 13.6667H11.6667C12.4031 13.6667 13 13.0698 13 12.3334V8.33337"
                  stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M6.99984 1L10.3332 4.62963M6.99984 10.3333V1V10.3333ZM6.99984 1L3.6665 4.62964L6.99984 1Z"
                  stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
              <span>Поделиться</span>
            </div>
            <div class="share__list">
              <a href="" class="share__item" target="_blank">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M2.22221 17.778C2.68608 18.2425 3.23717 18.6108 3.84382 18.8617C4.45047 19.1126 5.10072 19.2411 5.75721 19.24C6.41383 19.2411 7.06422 19.1125 7.67103 18.8617C8.27784 18.6108 8.82911 18.2425 9.29321 17.778L12.1212 14.949L10.7072 13.535L7.87921 16.364C7.31568 16.925 6.55288 17.2399 5.75771 17.2399C4.96253 17.2399 4.19974 16.925 3.63621 16.364C3.07471 15.8007 2.75941 15.0378 2.75941 14.2425C2.75941 13.4471 3.07471 12.6842 3.63621 12.121L6.46521 9.29296L5.05121 7.87896L2.22221 10.707C1.28601 11.6454 0.760254 12.9169 0.760254 14.2425C0.760254 15.568 1.28601 16.8395 2.22221 17.778ZM17.7782 9.29296C18.7139 8.35425 19.2393 7.08288 19.2393 5.75746C19.2393 4.43204 18.7139 3.16068 17.7782 2.22196C16.8397 1.28577 15.5683 0.76001 14.2427 0.76001C12.9171 0.76001 11.6457 1.28577 10.7072 2.22196L7.87921 5.05096L9.29321 6.46496L12.1212 3.63596C12.6847 3.07495 13.4475 2.75999 14.2427 2.75999C15.0379 2.75999 15.8007 3.07495 16.3642 3.63596C16.9257 4.19923 17.241 4.96213 17.241 5.75746C17.241 6.55279 16.9257 7.31569 16.3642 7.87896L13.5352 10.707L14.9492 12.121L17.7782 9.29296Z"
                    fill="#344463" />
                  <path d="M6.46383 14.95L5.04883 13.536L13.5358 5.05005L14.9498 6.46505L6.46383 14.95Z"
                    fill="#344463" />
                </svg>
              </a>
              <a href="" class="share__item" target="_blank">
                <svg width="21" height="12" viewBox="0 0 21 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M19.579 0.85495C19.719 0.38995 19.579 0.0489502 18.917 0.0489502H16.724C16.166 0.0489502 15.911 0.343951 15.771 0.667951C15.771 0.667951 14.656 3.38695 13.076 5.14995C12.566 5.66295 12.333 5.82495 12.055 5.82495C11.916 5.82495 11.714 5.66295 11.714 5.19795V0.85495C11.714 0.29695 11.553 0.0489502 11.088 0.0489502H7.642C7.294 0.0489502 7.084 0.30695 7.084 0.55295C7.084 1.08095 7.874 1.20295 7.955 2.69095V5.91895C7.955 6.62595 7.828 6.75495 7.548 6.75495C6.805 6.75495 4.997 4.02595 3.924 0.90195C3.715 0.29495 3.504 0.0499506 2.944 0.0499506H0.752C0.125 0.0499506 0 0.344951 0 0.668951C0 1.25095 0.743 4.13095 3.461 7.93995C5.273 10.5409 7.824 11.951 10.148 11.951C11.541 11.951 11.713 11.6379 11.713 11.0979V9.13195C11.713 8.50595 11.846 8.37995 12.287 8.37995C12.611 8.37995 13.169 8.54395 14.47 9.79695C15.956 11.283 16.202 11.95 17.037 11.95H19.229C19.855 11.95 20.168 11.6369 19.988 11.0189C19.791 10.4039 19.081 9.50895 18.139 8.44995C17.627 7.84595 16.862 7.19595 16.629 6.87095C16.304 6.45195 16.398 6.26695 16.629 5.89495C16.63 5.89595 19.301 2.13395 19.579 0.85495Z"
                    fill="#344463" />
                </svg>
              </a>
              <a href="" class="share__item" target="_blank">
                <svg width="20" height="18" viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M18.3764 0.774336L0.657315 7.64254C-0.0557314 7.96238 -0.296903 8.60289 0.484972 8.95051L5.03067 10.4026L16.0216 3.57484C16.6217 3.14621 17.2361 3.26051 16.7074 3.73203L7.26771 12.3232L6.97118 15.959C7.24583 16.5204 7.74872 16.523 8.0695 16.244L10.6811 13.76L15.154 17.1267C16.1929 17.7449 16.7581 17.346 16.9817 16.2129L19.9154 2.24922C20.22 0.854492 19.7006 0.239961 18.3764 0.774336Z"
                    fill="#344463" />
                </svg>
              </a>
              <a href="" class="share__item" target="_blank">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M13.0613 10.7865C12.8378 10.6748 11.742 10.1363 11.538 10.0613C11.334 9.98703 11.1855 9.95028 11.0363 10.1738C10.8877 10.3958 10.461 10.8983 10.3312 11.0468C10.2007 11.196 10.071 11.214 9.84825 11.103C9.6255 10.9905 8.907 10.7558 8.05575 9.99678C7.3935 9.40578 6.94575 8.67603 6.816 8.45253C6.68625 8.22978 6.80175 8.10903 6.9135 7.99803C7.014 7.89828 7.13625 7.73778 7.248 7.60803C7.35975 7.47753 7.3965 7.38453 7.47075 7.23528C7.54575 7.08678 7.50825 6.95703 7.452 6.84528C7.3965 6.73353 6.951 5.63628 6.765 5.19003C6.58425 4.75578 6.4005 4.81503 6.264 4.80753C6.1335 4.80153 5.985 4.80003 5.8365 4.80003C5.688 4.80003 5.4465 4.85553 5.2425 5.07903C5.03775 5.30178 4.4625 5.84103 4.4625 6.93828C4.4625 8.03478 5.2605 9.09453 5.37225 9.24378C5.484 9.39228 6.9435 11.6438 9.17925 12.609C9.71175 12.8385 10.1265 12.9758 10.4497 13.0778C10.9837 13.248 11.4698 13.224 11.8538 13.1663C12.2812 13.1025 13.1723 12.627 13.3583 12.1065C13.5435 11.586 13.5435 11.1398 13.488 11.0468C13.4325 10.9538 13.284 10.8983 13.0605 10.7865H13.0613ZM8.99475 16.3388H8.99175C7.66382 16.339 6.36028 15.9821 5.21775 15.3053L4.94775 15.1448L2.14125 15.8813L2.8905 13.1453L2.71425 12.8648C1.97185 11.683 1.57897 10.3154 1.581 8.91978C1.5825 4.83228 4.908 1.50678 8.99775 1.50678C10.9777 1.50678 12.8393 2.27928 14.2388 3.68028C14.929 4.36772 15.4762 5.1852 15.8485 6.08545C16.2208 6.9857 16.4109 7.95084 16.4078 8.92503C16.4062 13.0125 13.0807 16.3388 8.99475 16.3388ZM15.3038 2.61603C14.4774 1.78422 13.4942 1.12468 12.4111 0.675631C11.328 0.226579 10.1665 -0.00305719 8.994 3.07332e-05C4.0785 3.07332e-05 0.0765 4.00128 0.075 8.91903C0.0727223 10.4841 0.483281 12.0221 1.26525 13.3778L0 18L4.728 16.7595C6.03591 17.4721 7.50157 17.8455 8.991 17.8455H8.99475C13.9102 17.8455 17.9123 13.8443 17.9137 8.92578C17.9174 7.75374 17.6886 6.59261 17.2406 5.50956C16.7926 4.42651 16.1343 3.44303 15.3038 2.61603Z"
                    fill="#344463" />
                </svg>
              </a>
            </div>
          </div>
        </div>
        <div class="episode__play" v-if="item.type == 1 || item.type == 2">
          <div class="episode__play-icon">
            <svg width="69" height="69" viewBox="0 0 69 69" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g filter="url(#filter0_b_1103_252)">
                <circle cx="34.5" cy="34.5" r="34.5" fill="#EBEEF7" fill-opacity="0.55" />
                <circle cx="34.5" cy="34.5" r="34.5" fill="url(#paint0_linear_1103_252)" />
              </g>
              <path
                d="M44.7861 31.902C46.7861 33.0567 46.7861 35.9434 44.7861 37.0981L31.6076 44.7068C29.6076 45.8615 27.1076 44.4181 27.1076 42.1087L27.1076 26.8914C27.1076 24.582 29.6076 23.1386 31.6076 24.2933L44.7861 31.902Z"
                fill="#282D49" />
              <defs>
                <filter id="filter0_b_1103_252" x="-21" y="-21" width="111" height="111" filterUnits="userSpaceOnUse"
                  color-interpolation-filters="sRGB">
                  <feFlood flood-opacity="0" result="BackgroundImageFix" />
                  <feGaussianBlur in="BackgroundImage" stdDeviation="10.5" />
                  <feComposite in2="SourceAlpha" operator="in" result="effect1_backgroundBlur_1103_252" />
                  <feBlend mode="normal" in="SourceGraphic" in2="effect1_backgroundBlur_1103_252" result="shape" />
                </filter>
                <linearGradient id="paint0_linear_1103_252" x1="65.1859" y1="14.375" x2="3.28675" y2="17.7096"
                  gradientUnits="userSpaceOnUse">
                  <stop stop-color="#6395F8" />
                  <stop offset="1" stop-color="#B68FFF" />
                </linearGradient>
              </defs>
            </svg>
          </div>
          <div class="episode__play-title" v-if="item.type == 1">Смотреть: {{ playTime }}</div>
          <div class="episode__play-title" v-if="item.type == 2">Продолжить просмотр</div>
        </div>
        <div class="episode__viewed" v-if="item.type == 2">{{ viewedTime }}</div>
        <div class="episode__timeline" v-if="item.type == 2">
          <div class="episode__timeline-bar" :style="{
            'width': viewPercent + '%'
          }"></div>
        </div>
        <div class="episode__lock" v-if="item.type == 3">
          <div class="episode__lock-icon">
            <svg width="16" height="18" viewBox="0 0 16 18" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M14.25 7.75H13V5.25C13 3.92392 12.4732 2.65215 11.5355 1.71447C10.5979 0.776784 9.32608 0.25 8 0.25C6.67392 0.25 5.40215 0.776784 4.46447 1.71447C3.52678 2.65215 3 3.92392 3 5.25V7.75H1.75L0.5 9V16.5L1.75 17.75H14.25L15.5 16.5V9L14.25 7.75ZM4.25 5.25C4.25 4.25544 4.64509 3.30161 5.34835 2.59835C6.05161 1.89509 7.00544 1.5 8 1.5C8.99456 1.5 9.94839 1.89509 10.6517 2.59835C11.3549 3.30161 11.75 4.25544 11.75 5.25V7.75H4.25V5.25ZM14.25 16.5H1.75V9H14.25V16.5Z"
                fill="white" />
            </svg>
          </div>
          <div class="episode__lock-title">{{ lock ? lock : 'Посмотрите предыдущую лекцию, чтобы открыть эту' }}</div>
        </div>
        <div class="episode__repeat" v-if="item.type == 4 || item.type == 5">
          <div class="episode__repeat-icon">
            <svg width="21" height="16" viewBox="0 0 21 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M8.28928 11.1608C7.50823 11.9419 6.2419 11.9419 5.46085 11.1608L2.6459 8.34589C2.17876 7.87875 1.42137 7.87875 0.954232 8.34589C0.487091 8.81303 0.487091 9.57042 0.954232 10.0376L5.46085 14.5442C6.2419 15.3252 7.50823 15.3252 8.28928 14.5442L20.5292 2.30422C20.9964 1.83708 20.9964 1.0797 20.5292 0.612557C20.0621 0.145416 19.3047 0.145416 18.8376 0.612557L8.28928 11.1608Z"
                fill="#15172A" />
            </svg>
          </div>
          <div class="episode__repeat-title">
            <span>Смотреть заново</span>
            <svg width="6" height="9" viewBox="0 0 6 9" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M1.15806 0.536203C0.901772 0.792482 0.901772 1.208 1.15806 1.46428L4.19396 4.50024L1.15806 7.53623C0.901772 7.79252 0.901772 8.20797 1.15806 8.46425C1.41435 8.72054 1.8298 8.72054 2.08608 8.46426L5.58611 4.96425C5.84239 4.70797 5.84239 4.29252 5.58611 4.03623L2.08608 0.536203C1.8298 0.279924 1.41435 0.279924 1.15806 0.536203Z"
                fill="#E2E8F1" />
            </svg>
          </div>
        </div>
        <div class="episode__feedback" v-if="item.type == 4">
          <div class="episode__feedback-title">Пожалуйста оцените эту серию</div>
          <div class="episode__feedback-list">
            <div class="episode__feedback-item" v-for="item in 10" :key="item" @click="review = item">{{ item }}</div>
          </div>
        </div>
      </div>
      <div class="episode__poster">
        <img :src="item.poster" alt="">
      </div>
    </div>
    <div class="episode__info">
      <div class="episode__desc">
        <div v-if="item.chapter" class="episode__chapter">Часть {{ item.chapter }}</div>
        <div class="episode__time">{{ descTime }}</div>
      </div>
      <div class="episode__title">{{ item.title }}</div>
    </div>
  </div>
</template>
<script src="./Episode.js"></script>
<style src='./Episode.scss' lang="scss">
</style>
